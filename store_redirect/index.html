<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-color: #f4f4f4;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #FF6F00;
        }
        .store-links img {
            width: 150px;
            margin: 10px;
        }
        .store-links a img {
            transition: transform 0.2s;
            height: 50px;
        }
        .store-links a img:hover {
            transform: scale(1.1);
        }
        .footer {
            margin-top: 20px;
        }
        .footer img {
            width: 120px;
            margin-top: 10px;
        }
        .button {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background-color: #007BFF;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.3s;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .badge {
            width: 150px;
            margin: 10px;
        }
        .separator {
            width: 80%;
            height: 1px;
            background-color: #ddd;
            margin: 20px auto;
        }
    </style>
    <script>
        console.log("hello");
        window.onload = function() {
            var userAgent = navigator.userAgent || navigator.vendor || window.opera;
            var userLang = navigator.language || navigator.userLanguage;
            var url = window.location.href;
            var deeplink = {
                lsfandro: "market://launch?id=com.Mocaplab.lsdicos",
                aslandro: "market://launch?id=com.Mocaplab.sign3dasl",
                lsfios: "itms-apps://apps.apple.com/app/sign3d-lsf/id6443809599",
                aslios: "itms-apps://apps.apple.com/app/sign3d-asl/id6741157589"
            };
            var links = {lsfandro:"https://play.google.com/store/apps/details?id=com.Mocaplab.lsdicos&utm_source=flyer&utm_campaign=launch&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1",
                         lsfios:"https://apps.apple.com/app/sign3d-lsf/id6443809599?mt=flyer&ct=launch&pt=flyer",
                         aslandro:"https://play.google.com/store/apps/details?id=com.Mocaplab.sign3dasl&utm_source=flyer&utm_campaign=launch&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1",
                         aslios:"https://apps.apple.com/app/sign3d-asl/id6741157589?mt=flyer&ct=launch&pt=flyer"};
            var isFrench = userLang.startsWith("fr");
            
            var text = {
                title: isFrench ? "Téléchargez de nos applications en langue des signes" : "Download Our Sign Language Apps",
                lsf: isFrench ? "Sign3D LSF - Découvrez la Langue des Signes Française" : "Sign3D LSF - Discover French Sign Language",
                asl: isFrench ? "Sign3D ASL - Découvrez la Langue des Signes Américaine" : "Sign3D ASL -  Discover American Sign Language",
                signbabble: isFrench ? "Explorez la Langue des Signes Britannique" : "Explore British Sign Language",
                signeveil: isFrench ? "Explorez la Langue des Signes Française" : "Explore French Sign Language",
                kravmaga: isFrench ? "Découvrez des mouvements de Karv Maga" : "Discover Krav Maga movements",
                downloadios: isFrench ? "'${text.downloadios}'" : "Download on the App Store",
                downloadandro: isFrench ? "Disponible sur Google Play" : "Get it on Google Play",
                visit: isFrench ? "Visitez notre site web" : "Visit Our Website",
                follow: isFrench ? "Suivez-nous sur les réseaux sociaux" : "Follow us on social media",
                discover: isFrench ? "Découvrez nos autres applications!" : "Discover our other applications!",
                please: isFrench ? "S'il vous plait, visitez ce lien avec votre mobile" : "Please visit this link on your device"
            };
            var badge = {
                google: isFrench ? "https://play.google.com/intl/en_us/badges/static/images/badges/fr_badge_web_generic.png" : "https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png",
                ios: isFrench ? "https://toolbox.marketingtools.apple.com/api/v2/badges/download-on-the-app-store/black/fr-fr" : "https://toolbox.marketingtools.apple.com/api/v2/badges/download-on-the-app-store/black/en-us"
            };
            var footer = `
                <div class="separator"></div>
                <div class="footer">
                    <p>by</p>
                    <img alt="Mocaplab" src='Logo2016_Noir_Mocaplab.png' width="200"/>
                    <p><a id="visit-btn" href="https://mocaplab.com" class="button">${text.visit}</a></p>
                    <p>${text.follow}</p>
                    <a href="https://www.facebook.com/mocaplab"><svg font-size="1.5rem" width="0.5em" "aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook-f" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" data-fa-i2svg=""><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a>
                    <a href="https://www.linkedin.com/company/mocaplab"><svg font-size="1.5rem" width="0.875em" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg></a>
                </div>
                `;
            console.log(url);
            function redirectAndClose(url) {
                window.location.href = url;
                console.log(window.location.href);
                setTimeout(function() {
                    window.close();
                }, 2000); // Give time for redirect before attempting to close
            }
            if (url.includes("/?lsf/")) {
                if (/android/i.test(userAgent)) {
                    // Redirect to Google Play Store
                    redirectAndClose(deeplink.lsfandro);
                } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                    // Redirect to Apple App Store
                    redirectAndClose(deeplink.lsfios);
                } else {
                    // Default fallback (optional)
                    document.title = "Sign3D LSF";
                    document.body.innerHTML = `
                    <div class="container">
                        <h2 style="color: #FFA967;">${text.please}</h2>
                        <div class='store-links'>
                            <img alt="Sign3D LSF" src="final_Sign3D_LSF.png"/>
                            <p>${text.lsf}</p>
                            <a href=${links.lsfandro}><img alt='${text.downloadandro}' src='${badge.google}'/></a> 
                            <a href=${links.lsfios}><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                        </div>
                        <p></p>
                        <p></p>
                        <a href=https://mocaplab.github.io/lsdicos_web/store_redirect/>${text.discover}</a>
                        <p></p>
                        ${footer}
                    </div>`;
                    console.log("fallback lsf not on mobile");
                }
            } else if (url.includes("/?asl/")) {
                if (/android/i.test(userAgent)) {
                    // Redirect to Google Play Store
                    redirectAndClose(deeplink.aslandro);
                } else if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {
                    // Redirect to Apple App Store
                    redirectAndClose(deeplink.aslios);
                } else {
                    // Default fallback (optional)
                    document.title = "Sign3D ASL";
                    document.body.innerHTML = `
                    <div class="container">
                        <h2 style="color: #FFA967;">${text.please}</h2>
                        <div class='store-links'>
                            <img alt="Sign3D ASL" src='final_Sign3D_ASL.png'/>
                            <p>${text.asl}</p>
                            <a href=${links.aslandro}><img alt='${text.downloadandro}' src='${badge.google}'/></a> 
                            <a href=${links.aslios}><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                        </div>
                        <p></p>
                        <p></p>
                        <a href=https://mocaplab.github.io/lsdicos_web/store_redirect/>${text.discover}</a>
                        <p></p>
                        ${footer}
                    </div>`;
                    console.log("fallback asl not on mobile");
                }
            } else {
                document.title = "Sign3D Family";
                document.body.innerHTML = `
                <div class="container">
                    <div class='store-links'>
                        <h2>Our Sign Language applications</h2>
                        <h3 style="color: #FFA967;">Sign3D LSF</h3>
                        <img alt="Sign3D LSF" src='final_Sign3D_LSF.png'/>
                        <p>${text.lsf}</p>
                        
                        <a href=${links["lsfandro"]}><img alt='${text.downloadandro}' src='${badge.google}'/></a>
                        <a href=${links["lsfios"]}><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                        
                        <div class="separator"></div>
                        <h3 style="color: #FFA967;">Sign3D ASL</h3>
                        <img alt="Sign3D ASL" src='final_Sign3D_ASL.png'/>
                        <p>>${text.asl}</p>

                        <a href=${links.aslandro}><img alt='${text.downloadandro}' src='${badge.google}'/></a> 
                        <a href=${links.aslios}><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                        
                        <div class="separator"></div>
                        <h3>SignEveil2</h3>
                        <img alt="SignEveil2" src='SignEveil2.png'/>
                        <p>${text.signeveil}</p>
                        <a href="https://play.google.com/store/apps/details?id=com.Mocaplab.SignEveil2&utm_source=flyer&utm_campaign=launch&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt='${text.downloadandro}' src='${badge.google}'/></a>
                        <a href="https://apps.apple.com/app/signeveil-2/id1504933087?mt=flyer&ct=launch&pt=flyer"><img alt="${text.downloadios}" src='${badge.ios}'/></a>
                        
                        <div class="separator"></div>
                        <h3>SignBabble</h3>
                        <img alt="SignBabble" src='SignBabble.png'/>
                        <p>${text.signbabble}</p>
                        <a href="https://play.google.com/store/apps/details?id=com.Mocaplab.SignBables&utm_source=flyer&utm_campaign=launch&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt='${text.downloadandro}' src='${badge.google}'/></a>
                        <a href="https://apps.apple.com/app/sign-babble/id1462266052?mt=flyer&ct=launch&pt=flyer"><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                        
                        <div class="separator"></div>
                        <h2>Our other applications</h2>
                        <h3>Krav Maga Secrets</h3>
                        <img alt="Krav Maga Secrets" src='KMS.png'/>
                        <p>${text.kravmaga}</p>
                        <a href="https://play.google.com/store/apps/details?id=com.DefaultCompany.Kravmaga&utm_source=flyer&utm_campaign=launch&pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1"><img alt='${text.downloadandro}' src='${badge.google}'/></a>
                        <a href="https://apps.apple.com/fr/app/krav-maga-secrets/id1496334954?mt=flyer&ct=launch&pt=flyer"><img alt='${text.downloadios}' src='${badge.ios}'/></a>
                    </div>
                    <p></p>
                    <p></p>
                    <p></p>
                    ${footer}
                </div>`;
            }
        };
    </script>
</head>
</html>